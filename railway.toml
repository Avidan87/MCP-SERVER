# Railway deployment configuration for MiDaS MCP Server
# Optimized for cost reduction with lazy loading

[build]
  # Use Dockerfile for build
  builder = "DOCKERFILE"
  dockerfilePath = "Dockerfile"

[deploy]
  # Railway will use CMD from Dockerfile - DO NOT add startCommand here!
  # Adding startCommand breaks $PORT variable expansion

  # Health check endpoint - TEMPORARILY DISABLED FOR DEBUGGING
  # healthcheckPath = "/health"
  # healthcheckTimeout = 300

  # Restart policy
  restartPolicyType = "on_failure"
  restartPolicyMaxRetries = 3

[env]
  # Railway will automatically set PORT
  # These are additional environment variables
  PYTHONUNBUFFERED = "1"
